@baseurl = http://localhost:3333
@authToken = eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0ZDNjZWQ4MC1hMjM1LTQ3YzQtYWEyMi1kYzc2OWJjOWI2YzkiLCJpYXQiOjE3NTk3MTI1MDd9.k91eSyTJheax6SsM0lsDn-bQmdU1SfBvXgWVXGXRPDeGBmP1c006ZQ9SkRCxwb89vBLl9O4cJMCCuvvhmMIl3EJRQce7uFHczMdfwL1mq0CYhs3yy1IRpMab5nczpHcUlw1-GNFnm3AHFsSdC-uuH73_Gz0DLJ-nxppbV-s0IqmscH1OollRos7AOuQCplWna4rCh5flqMmuqJAnjqXbQZAQcWgINvIZaao3YQtDW7-gRJ1ZB6RntLCwHItF4-Klij_wTS74-caxuwkwHEy7JsQ2O94ZI9amTplKcirbMc6eSnieCM4Of4HSTtx2xMuB-goCQsmS93Jb-IG1nPV9Ag
@apiKey = lak_a53fabc52891fb2061c3961eaed6e10937660221bbe634fac421eb0a2395a88b

### ========================================
### USUÁRIOS
### ========================================

# @name create_account
POST {{baseurl}}/users
Content-Type: application/json

{
  "name": "André Carvalho",
  "email": "andrea@example.com",
  "password": "123456"
}

###

### ========================================
### AUTENTICAÇÃO
### ========================================

# @name authenticate
POST {{baseurl}}/sessions
Content-Type: application/json

{
  "email": "andrea@example.com",
  "password": "123456"
}

###

### ========================================
### API KEY MANAGEMENT
### ========================================

# @name generate_api_key
POST {{baseurl}}/users/api-key/generate
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

# @name get_api_key
GET {{baseurl}}/users/api-key
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

# @name revoke_api_key
DELETE {{baseurl}}/users/api-key
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

### ========================================
### LANDING PAGES
### ========================================

# @name create_landing_page
POST {{baseurl}}/landing-pages
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "Landing Page Teste",
  "slug": "landing-page-teste",
  "url": "https://example.com/landing-page-teste"
}

###

# @name list_landing_pages
GET {{baseurl}}/landing-pages
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

# @name list_landing_pages_with_filters
GET {{baseurl}}/landing-pages?page=1&perPage=10&search=teste
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

### ========================================
### LEADS (Autenticação via JWT)
### ========================================

# @name create_lead
POST {{baseurl}}/leads
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "landingPageId": "9d449c6a-fabc-483c-8034-8d281d8d92ff",
  "name": "João Silva",
  "email": "joao@example.com",
  "phone": "+5511999999999",
  "position": "Desenvolvedor",
  "dateOfBirth": "1990-05-15T00:00:00.000Z",
  "message": "Gostaria de saber mais sobre o produto",
  "utmSource": "google",
  "utmMedium": "cpc",
  "utmCampaign": "black-friday-2024",
  "utmTerm": "curso-programacao",
  "utmContent": "anuncio-a",
  "gclid": "TeSter-123",
  "fbclid": "IwAR123456"
}

###

# @name list_leads
GET {{baseurl}}/leads
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

# @name list_leads_with_filters
GET {{baseurl}}/leads?page=1&perPage=20&search=joão
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

# @name list_leads_by_landing_page_id
GET {{baseurl}}/leads?landingPageId=9d449c6a-fabc-483c-8034-8d281d8d92ff
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

# @name list_lead_by_id
GET {{baseurl}}/leads/9eadd4f3-bf80-495f-bc13-a1052824c2d4
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

# @name update_lead
PUT {{baseurl}}/leads/23105893-d5c1-4aab-9c9f-1d3d0d5712ff
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "name": "João Silva Atualizado",
  "email": "joao.atualizado@example.com",
  "phone": "+5511988888888"
}

###

# @name delete_lead
DELETE {{baseurl}}/leads/23105893-d5c1-4aab-9c9f-1d3d0d5712ff
Content-Type: application/json
Authorization: Bearer {{authToken}}

###

### ========================================
### LEADS (Autenticação via API KEY)
### Para uso em Landing Pages externas
### ========================================

# @name create_lead_with_api_key
POST {{baseurl}}/leads
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "landingPageId": "9d449c6a-fabc-483c-8034-8d281d8d92ff",
  "name": "Lead via API Key",
  "email": "lead-apiasf@example.com",
  "phone": "+5511988888888",
  "message": "Lead criado via API Key para teste de integração",
  "utmSource": "landing-page",
  "utmMedium": "organic",
  "utmCampaign": "campaign-test"
}

###

# @name create_lead_with_api_key_minimal
POST {{baseurl}}/leads
Content-Type: application/json
Authorization: Bearer {{apiKey}}

{
  "name": "Maria Santos",
  "email": "maria@example.com"
}
